from pymodbus.server.sync import StartTcpServer
from pymodbus.datastore import ModbusSequentialDataBlock
from pymodbus.datastore import ModbusSlaveContext, ModbusServerContext

# Define the data blocks
block = ModbusSequentialDataBlock(0, [0] * 100)

# Create a Modbus slave context
store = ModbusSlaveContext(di=block, co=block, hr=block, ir=block)
context = ModbusServerContext(slaves=store, single=True)

# Start the Modbus TCP server
StartTcpServer(context, address=("localhost", 5020))
