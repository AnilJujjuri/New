import minimalmodbus

# Set up the Modbus client
instrument = minimalmodbus.Instrument('localhost', 5020)  # Adjust IP and port as needed

# Set the Modbus communication parameters (optional)
instrument.serial.timeout = 1  # Timeout in seconds
instrument.serial.baudrate = 19200  # Baud rate
instrument.mode = minimalmodbus.MODE_TCP  # Modbus TCP mode

# Read a register
register_address = 0x0000  # Adjust the register address as needed
read_value = instrument.read_register(register_address, functioncode=3)

print(f"Value read from register {register_address}: {read_value}")

# Write to a register
write_address = 0x0001  # Adjust the register address as needed
write_value = 12345  # Value to write
instrument.write_register(write_address, write_value, functioncode=6)

print(f"Value {write_value} written to register {write_address}")
