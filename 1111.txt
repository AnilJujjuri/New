import time
from opcua import Client
from opcua import ua


if __name__ == '__main__':
    client = Client("opc.tcp://MYTSL02946.lnties.com:53530/OPCUA/SimulationServer")
    client.connect()

    print("Client created")

    node_id = "ns=3;i=1012"

    try:
        node = client.get_node(node_id)

        value = 0
        while True:
            value += 1  # Increment the value
            variant = ua.Variant(value, ua.VariantType.Int32)
            node.set_value(variant)
            print(f"Value written: {value}")
            time.sleep(1)  # Wait for 1 second

    except KeyboardInterrupt:
        pass

    client.disconnect()
