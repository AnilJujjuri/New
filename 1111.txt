from opcua import Client
import time

# Connect to the OPC UA server
url = "opc.tcp://localhost:53530/OPCUA/SimulationServer"
client = Client(url)
client.connect()

# Get the node to update
node_id = "ns=3;i=1003"
node = client.get_node(node_id)

# Update the value in a loop
while True:
    # Read the current value
    current_value = node.get_value()
    print(f"Current Value: {current_value}")
    
    # Calculate the new value (increment by 1)
    new_value = current_value + 1
    
    # Write the new value to the server
    node.set_value(new_value)
    print(f"New Value: {new_value}")
    
    # Wait for a second before the next iteration
    time.sleep(1)

# Disconnect from the server
client.disconnect()
